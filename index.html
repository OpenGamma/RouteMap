<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>JsDoc Reference - RouteMap</title>

		<style type="text/css">
			/* default.css */
body
{
	font: 12px "Lucida Grande", Tahoma, Arial, Helvetica, sans-serif;
	width: 800px;
}

.header
{
	clear: both;
	background-color: #ccc;
	padding: 8px;
}

h1
{
	font-size: 150%;
	font-weight: bold;
	padding: 0;
	margin: 1em 0 0 .3em;
}

hr
{
	border: none 0;
	border-top: 1px solid #7F8FB1;
	height: 1px;
}

pre.code
{
	display: block;
	padding: 8px;
	border: 1px dashed #ccc;
}

#index
{
	margin-top: 24px;
	float: left;
	width: 160px;
	position: absolute;
	left: 8px;
	background-color: #F3F3F3;
	padding: 8px;
}

#content
{
	margin-left: 190px;
	width: 600px;
}

.classList
{
	list-style-type: none;
	padding: 0;
	margin: 0 0 0 8px;
	font-family: arial, sans-serif;
	font-size: 1em;
	overflow: auto;
}

.classList li
{
	padding: 0;
	margin: 0 0 8px 0;
}

.summaryTable { width: 100%; }

h1.classTitle
{
	font-size:170%;
	line-height:130%;
}

h2 { font-size: 110%; }
caption, div.sectionTitle
{
	background-color: #7F8FB1;
	color: #fff;
	font-size:130%;
	text-align: left;
	padding: 2px 6px 2px 6px;
	border: 1px #7F8FB1 solid;
}

div.sectionTitle { margin-bottom: 8px; }
.summaryTable thead { display: none; }

.summaryTable td
{
	vertical-align: top;
	padding: 4px;
	border-bottom: 1px #7F8FB1 solid;
	border-right: 1px #7F8FB1 solid;
}

/*col#summaryAttributes {}*/
.summaryTable td.attributes
{
	border-left: 1px #7F8FB1 solid;
	width: 140px;
	text-align: right;
}

td.attributes, .fixedFont
{
	line-height: 15px;
	color: #002EBE;
	font-family: "Courier New",Courier,monospace;
	font-size: 13px;
}

.summaryTable td.nameDescription
{
	text-align: left;
	font-size: 13px;
	line-height: 15px;
}

.summaryTable td.nameDescription, .description
{
	line-height: 15px;
	padding: 4px;
	padding-left: 4px;
}

.summaryTable { margin-bottom: 8px; }

ul.inheritsList
{
	list-style: square;
	margin-left: 20px;
	padding-left: 0;
}

.detailList {
	margin-left: 20px; 
	line-height: 15px;
}
.detailList dt { margin-left: 20px; }

.detailList .heading
{
	font-weight: bold;
	padding-bottom: 6px;
	margin-left: 0;
}

.light, td.attributes, .light a:link, .light a:visited
{
	color: #777;
	font-style: italic;
}

.fineprint
{
	text-align: right;
	font-size: 10px;
}
		</style>
	</head>

	<body>
<!-- ============================== header ================================= -->	
		<!-- begin static/header.html -->
		<div id="header">
</div>
		<!-- end static/header.html -->

		
		<div id="content">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Namespace RouteMap
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				RouteMap
				
				
					<br /><i>Defined in: </i> <a href="././symbols/src/routemap.js.html">routemap.js</a>.
				
			</p>

<!-- ============================== constructor summary ==================== -->			
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class RouteMap.">
				<caption>Namespace Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="#constructor">RouteMap</a></b>
							</div>
							<div class="description"><p>RouteMap holds an internal table of route patterns and method names in addition to some
adding/removing/utility methods and a handler for request routing.</div>
						</td>
					</tr>
				</tbody>
			</table>
			

<!-- ============================== properties summary ===================== -->
			

<!-- ============================== methods summary ======================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the methods documented in the class RouteMap.">
					<caption>Method Summary</caption>
					<thead>
						<tr>
							<th scope="col">Method Attributes</th>
							<th scope="col">Method Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.add">add</a></b>(rule)
								</div>
								<div class="description">adds a rule to the internal table of routes and methods</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;private&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="#compile">compile</a></b>(route)
								</div>
								<div class="description">builds the internal representation of a rule based on the route definition</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.context">context</a></b>(scope)
								</div>
								<div class="description">overrides the context where listener methods are sought, the default scope is <code>window</code>
(in a browser setting), returns the current context, if no <code>scope</code> object is passed in, just
returns current context without setting context</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.current">current</a></b>()
								</div>
								<div class="description">returns the parsed (see <a href="#parse">#parse</a>) currently accessed route; after listeners have finished
firing, <code>current</code> and <code>last</code> are the same</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.default_handler">default_handler</a></b>()
								</div>
								<div class="description">this function is fired when no rule is matched by a URL, by default it does nothing, but it could be set up
to handle things like <code>404</code> responses on the server-side or bad hash fragments in the browser</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.get">get</a></b>()
								</div>
								<div class="description">URL grabber function, defaults to checking the URL fragment (<code>hash</code>); this function should be
overwritten in a server-side environment; this method is called by <a href="#.handler">RouteMap.handler</a>; without
<code>window.location.hash</code> it will return <code>'/'</code></div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.go">go</a></b>(hash)
								</div>
								<div class="description">in a browser setting, it changes <code>window.location.hash</code>, in other settings, it should be
overwritten to do something useful (if necessary); it will not throw an error if <code>window</code> does
not exist</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.handler">handler</a></b>()
								</div>
								<div class="description">main handler function for routing, this should be bound to <code>hashchange</code> events in the browser, or
(in conjunction with updating <a href="#.get">RouteMap.get</a>) used with the HTML5 <code>history</code> API, it detects
all the matching route patterns, parses the URL parameters and fires their methods with the arguments from
the parsed URL; the timing of <a href="#.current">RouteMap.current</a> and <a href="#.last">RouteMap.last</a> being set is as follows
(pseudo-code):
<blockquote><pre>
path: get_route             // <a href="#.get">RouteMap.get</a>
parsed: parse path          // <a href="#parse">#parse</a>
current: longest parsed     // <a href="#.current">RouteMap.current</a>
parsed: pre_dispatch parsed // <a href="#.pre_dispatch">RouteMap.pre_dispatch</a>
current: longest parsed     // reset current
fire matched rules in parsed
last: current               // <a href="#.last">RouteMap.last</a>
</pre></blockquote>
<code>RouteMap.handler</code> calls <a href="#parse">#parse</a> and does not catch any errors that function throws</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.hash">hash</a></b>(rule, params)
								</div>
								<div class="description">returns a URL fragment by applying parameters to a rule; uses <a href="#compile">#compile</a> and does not catch any errors
thrown by that function</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.last">last</a></b>()
								</div>
								<div class="description">returns the parsed (see <a href="#parse">#parse</a>) last accessed route; when route listeners are being called,
<code>last</code> is the previously accessed route, after listeners have finished firing, the current parsed
route replaces <code>last</code>'s value</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;private&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="#merge">merge</a></b>()
								</div>
								<div class="description">merges one or more objects into a new object by value (nothing is a reference), useful for cloning</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.parse">parse</a></b>()
								</div>
								<div class="description">parses a URL fragment into a data structure only if there is a route whose pattern matches the fragment</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;private&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="#parse">parse</a></b>(path)
								</div>
								<div class="description">parses a path and returns a list of objects that contain argument dictionaries, methods, and raw hash values</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.post_add">post_add</a></b>(compiled)
								</div>
								<div class="description">this function is called by <a href="#.add">RouteMap.add</a>, it receives a compiled rule object, e.g.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.pre_dispatch">pre_dispatch</a></b>(parsed)
								</div>
								<div class="description">like <a href="#.post_add">RouteMap.post_add</a> this function can be overwritten to add application-specific code into
route mapping, it is called before a route begins being dispatched to all matching rules; it receives the
list of matching parsed route objects (<a href="#parse">#parse</a>) and is expected to return it; one application of this
function might be to set application-wide variables like debug flags</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.prefix">prefix</a></b>(prefix)
								</div>
								<div class="description">if a string is passed in, it overwrites the prefix that is removed from each URL before parsing; primarily
used for hashbang (<code>#!</code>); either way, it returns the current prefix</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">RouteMap.<b><a href="#.remove">remove</a></b>(rule)
								</div>
								<div class="description">counterpart to <a href="#.add">RouteMap.add</a>, removes a rule specification; * <code>remove</code> uses
<a href="#compile">#compile</a> and does not catch any errors thrown by that function</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== constructor details ==================== -->		
			
			<div class="details"><a name="constructor"> </a>
				<div class="sectionTitle">
					Namespace Detail
				</div>
				
				<div class="fixedFont">
						<b>RouteMap</b>
				</div>
				
				<div class="description">
					<p>RouteMap holds an internal table of route patterns and method names in addition to some
adding/removing/utility methods and a handler for request routing.</p>
<p>It does not have any dependencies and is written in "plain old" JS, but it does require JS 1.8 array methods, so
if the environment it will run in does not have those, the reference implementations from
<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/">Mozilla</a> should be
supplied external to this library.</p>
<p>It is designed to be used in both a browser setting and a server-side context (for example in node.js).</p>
<strong>LICENSING INFORMATION:</strong>
<blockquote><pre>
Copyright 2011 OpenGamma Inc. and the OpenGamma group of companies
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</pre></blockquote>
					<br /><i>Author: </i>Afshin Darian.
				</div>
				
				
				
				
					
					
					
					
						<dl class="detailList">
						<dt class="heading">Throws:</dt>
						
							<dt>
								<span class="light fixedFont">{Error}</span>  <b></b>
							</dt>
								<dd>if JS 1.8 Array.prototype methods don't exist</dd>
						
						</dl>
					
					
					
					
						<dl class="detailList">
						<dt class="heading">See:</dt>
						
							<dd><a href="http://www.opengamma.com/">OpenGamma</a></dd>
						
							<dd><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a></dd>
						
							<dd><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/">Mozilla Developer
Network</a></dd>
						
						</dl>
					

			</div>
			

<!-- ============================== field details ========================== -->		
			

<!-- ============================== method details ========================= -->		
			
				<div class="sectionTitle">
					Method Detail
				</div>
				
					<a name=".add"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>add</b>(rule)
					
					</div>
					<div class="description">
						adds a rule to the internal table of routes and methods
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>rule</b>
									
								</dt>
								<dd>rule specification</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>rule.route</b>
									
								</dt>
								<dd>route pattern definition; there are three types of pattern arguments: scalars,
keyvals, and stars; scalars are individual values in a URL (all URL values are separate by the
<code>'/'</code> character), keyvals are named values, e.g. 'foo=bar', and star values are wildcards; so for
example, the following pattern represents all the possible options:<blockquote>
<code>'/foo/:id/:sub?/attr:/subattr:?/rest:*'</code></blockquote>the <code>?</code> means that argument is
optional, the star rule is named <code>rest</code> but it could have just simply been left as <code>*</code>,
which means the resultant dictionary would have put the wildcard remainder into <code>args['*']</code>
instead of <code>args.rest</code>; so the following URL would match the pattern above:<blockquote>
<code>/foo/23/45/attr=something/subattr=something_else</code></blockquote>
when its method is called, it will receive this arguments dictionary:<blockquote>
<code><pre>{
     id:'23',
     subid:'45',
     attr:'something',
     subattr:'something_else',
     rest:''
}</pre></code></blockquote>
<code>add</code> uses <a href="#compile">#compile</a> and does not catch any errors thrown by that function</dd>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>rule.method</b>
									
								</dt>
								<dd>listener method for this route</dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if <code>rule.route</code> or <code>rule.method</code> are not strings or empty strings</dd>
							
								<dt>
									<span class="light fixedFont">{Error}</span>  <b></b>
								</dt>
								<dd>if <code>rule</code> has already been added</dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">See:</dt>
							
								<dd><a href="#.post_add">RouteMap.post_add</a></dd>
							
							</dl>
						

					<hr />
				
					<a name="compile"> </a>
					<div class="fixedFont">&lt;private&gt; 
					
					
					<b>compile</b>(route)
					
					</div>
					<div class="description">
						builds the internal representation of a rule based on the route definition
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>route</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{SyntaxError}</span>  <b></b>
								</dt>
								<dd>if any portion of a rule definition follows a <code>*</code> directive</dd>
							
								<dt>
									<span class="light fixedFont">{SyntaxError}</span>  <b></b>
								</dt>
								<dd>if a required scalar follows an optional scalar</dd>
							
								<dt>
									<span class="light fixedFont">{SyntaxError}</span>  <b></b>
								</dt>
								<dd>if a rule cannot be parsed</dd>
							
							</dl>
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> a compiled object, for example, the rule <code>'/foo/:id/type:?/rest:*'</code> would return
an object of the form: <blockquote><pre>{
    page:'/foo',
    rules:{
        keyvals:[{name: 'type', required: false}],
        scalars:[{name: 'id', required: true}],
        star:'rest' // false if not defined
    }
}</dd>
							
							</dl>
						
						
						
							<dl class="detailList">
							<dt class="heading">See:</dt>
							
								<dd><a href="#.add">RouteMap.add</a></dd>
							
								<dd><a href="#.hash">RouteMap.hash</a></dd>
							
								<dd><a href="#.remove">RouteMap.remove</a></dd>
							
							</dl>
						

					<hr />
				
					<a name=".context"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">RouteMap.</span><b>context</b>(scope)
					
					</div>
					<div class="description">
						overrides the context where listener methods are sought, the default scope is <code>window</code>
(in a browser setting), returns the current context, if no <code>scope</code> object is passed in, just
returns current context without setting context
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>scope</b>
									
								</dt>
								<dd>the scope within which methods for mapped routes will be looked for</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> the current context within which RouteMap searches for handlers</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".current"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Object}</span>
					<span class="light">RouteMap.</span><b>current</b>()
					
					</div>
					<div class="description">
						returns the parsed (see <a href="#parse">#parse</a>) currently accessed route; after listeners have finished
firing, <code>current</code> and <code>last</code> are the same
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> the current parsed URL object</dd>
							
							</dl>
						
						
						
							<dl class="detailList">
							<dt class="heading">See:</dt>
							
								<dd><a href="#.last">RouteMap.last</a></dd>
							
							</dl>
						

					<hr />
				
					<a name=".default_handler"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>default_handler</b>()
					
					</div>
					<div class="description">
						this function is fired when no rule is matched by a URL, by default it does nothing, but it could be set up
to handle things like <code>404</code> responses on the server-side or bad hash fragments in the browser
						
						
					</div>
					
					
					
						
						
						
						
						
						
						

					<hr />
				
					<a name=".get"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{String}</span>
					<span class="light">RouteMap.</span><b>get</b>()
					
					</div>
					<div class="description">
						URL grabber function, defaults to checking the URL fragment (<code>hash</code>); this function should be
overwritten in a server-side environment; this method is called by <a href="#.handler">RouteMap.handler</a>; without
<code>window.location.hash</code> it will return <code>'/'</code>
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{String}</span> by default, this returns a subset of the URL hash (everything after the first
<code>'/'</code> character ... if nothing follows a slash, it returns <code>'/'</code>); if overwritten, it
must be a function that returns URL path strings (beginning with <code>'/'</code>) to match added rules</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".go"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>go</b>(hash)
					
					</div>
					<div class="description">
						in a browser setting, it changes <code>window.location.hash</code>, in other settings, it should be
overwritten to do something useful (if necessary); it will not throw an error if <code>window</code> does
not exist
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>hash</b>
									
								</dt>
								<dd>the hash fragment to go to</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".handler"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>handler</b>()
					
					</div>
					<div class="description">
						main handler function for routing, this should be bound to <code>hashchange</code> events in the browser, or
(in conjunction with updating <a href="#.get">RouteMap.get</a>) used with the HTML5 <code>history</code> API, it detects
all the matching route patterns, parses the URL parameters and fires their methods with the arguments from
the parsed URL; the timing of <a href="#.current">RouteMap.current</a> and <a href="#.last">RouteMap.last</a> being set is as follows
(pseudo-code):
<blockquote><pre>
path: get_route             // <a href="#.get">RouteMap.get</a>
parsed: parse path          // <a href="#parse">#parse</a>
current: longest parsed     // <a href="#.current">RouteMap.current</a>
parsed: pre_dispatch parsed // <a href="#.pre_dispatch">RouteMap.pre_dispatch</a>
current: longest parsed     // reset current
fire matched rules in parsed
last: current               // <a href="#.last">RouteMap.last</a>
</pre></blockquote>
<code>RouteMap.handler</code> calls <a href="#parse">#parse</a> and does not catch any errors that function throws
						
						
					</div>
					
					
					
						
						
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">See:</dt>
							
								<dd><a href="#.pre_dispatch">RouteMap.pre_dispatch</a></dd>
							
							</dl>
						

					<hr />
				
					<a name=".hash"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{String}</span>
					<span class="light">RouteMap.</span><b>hash</b>(rule, params)
					
					</div>
					<div class="description">
						returns a URL fragment by applying parameters to a rule; uses <a href="#compile">#compile</a> and does not catch any errors
thrown by that function
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>rule</b>
									
								</dt>
								<dd>the rule specification; it typically looks like: <blockquote>
<code>{route:'/foo', method:'bar'}</code></blockquote> but only <code>route</code> is strictly necessary</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>params</b>
									
								</dt>
								<dd>a dictionary of argument key/value pairs required by the rule</dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if a required parameter is not present</dd>
							
							</dl>
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{String}</span> URL fragment resulting from applying arguments to rule pattern</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".last"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Object}</span>
					<span class="light">RouteMap.</span><b>last</b>()
					
					</div>
					<div class="description">
						returns the parsed (see <a href="#parse">#parse</a>) last accessed route; when route listeners are being called,
<code>last</code> is the previously accessed route, after listeners have finished firing, the current parsed
route replaces <code>last</code>'s value
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> the last parsed URL object, will be <code>null</code> on first load</dd>
							
							</dl>
						
						
						
							<dl class="detailList">
							<dt class="heading">See:</dt>
							
								<dd><a href="#.current">RouteMap.current</a></dd>
							
							</dl>
						

					<hr />
				
					<a name="merge"> </a>
					<div class="fixedFont">&lt;private&gt; 
					
					<span class="light">{Object}</span>
					<b>merge</b>()
					
					</div>
					<div class="description">
						merges one or more objects into a new object by value (nothing is a reference), useful for cloning
						
						
					</div>
					
					
					
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if one of the arguments is not a mergeable object (i.e. a primitive, null or array)</dd>
							
							</dl>
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> a merged object</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".parse"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Object}</span>
					<span class="light">RouteMap.</span><b>parse</b>()
					
					</div>
					<div class="description">
						parses a URL fragment into a data structure only if there is a route whose pattern matches the fragment
						
						
					</div>
					
					
					
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if hash is not a string, is empty, or does not contain a <code>'/'</code> character</dd>
							
								<dt>
									<span class="light fixedFont">{SyntaxError}</span>  <b></b>
								</dt>
								<dd>if hash cannot be parsed by <a href="#parse">#parse</a></dd>
							
							</dl>
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> of the form: <blockquote><code>{page:'/foo', args:{bar:'some_value'}}</code></blockquote>
only if a rule with the route: <code>'/foo/:bar'</code> has already been added</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="parse"> </a>
					<div class="fixedFont">&lt;private&gt; 
					
					<span class="light">{Array}</span>
					<b>parse</b>(path)
					
					</div>
					<div class="description">
						parses a path and returns a list of objects that contain argument dictionaries, methods, and raw hash values
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>path</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if the method specified by a rule specification does not exist during parse time</dd>
							
							</dl>
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Array}</span> a list of parsed objects in descending order of matched hash length</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".post_add"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Object}</span>
					<span class="light">RouteMap.</span><b>post_add</b>(compiled)
					
					</div>
					<div class="description">
						this function is called by <a href="#.add">RouteMap.add</a>, it receives a compiled rule object, e.g. for the rule:
<blockquote><code>{route:'/foo/:id/:sub?/attr:/subattr:?/rest:*', method:'console.log'}</code></blockquote>
<code>post_add</code> would receive the following object:
<blockquote><code><pre>{
    method:'console.log',
    rules:{
        scalars:[{name:'id',required:true},{name:'sub',required:false}],
        keyvals:[{name:'attr',required:true},{name:'subattr',required:false}],
        star:'rest'
    },
    raw:'/foo/:id/:sub?/attr:/subattr:?/rest:*'
}</pre></code></blockquote>
and it is expected to pass back an object of the same format; it can be overwritten to post-process added
rules e.g. to add extra default application-wide parameters; by default, it simply returns what was passed
into it
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>compiled</b>
									
								</dt>
								<dd>the compiled rule</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> the default function returns the exact object it received; a custom function needs to
an object that is of the same form (but could possibly have more or fewer parameters, etc.)</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".pre_dispatch"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Array}</span>
					<span class="light">RouteMap.</span><b>pre_dispatch</b>(parsed)
					
					</div>
					<div class="description">
						like <a href="#.post_add">RouteMap.post_add</a> this function can be overwritten to add application-specific code into
route mapping, it is called before a route begins being dispatched to all matching rules; it receives the
list of matching parsed route objects (<a href="#parse">#parse</a>) and is expected to return it; one application of this
function might be to set application-wide variables like debug flags
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Array}</span> <b>parsed</b>
									
								</dt>
								<dd>the parsed request</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Array}</span> a list of the same form as the one it receives</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".prefix"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>prefix</b>(prefix)
					
					</div>
					<div class="description">
						if a string is passed in, it overwrites the prefix that is removed from each URL before parsing; primarily
used for hashbang (<code>#!</code>); either way, it returns the current prefix
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{String}</span> <b>prefix</b>
									
								</dt>
								<dd>(optional) the prefix string</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".remove"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{undefined}</span>
					<span class="light">RouteMap.</span><b>remove</b>(rule)
					
					</div>
					<div class="description">
						counterpart to <a href="#.add">RouteMap.add</a>, removes a rule specification; * <code>remove</code> uses
<a href="#compile">#compile</a> and does not catch any errors thrown by that function
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>rule</b>
									
								</dt>
								<dd>the rule specification that was used in <a href="#.add">RouteMap.add</a></dd>
							
							</dl>
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Throws:</dt>
							
								<dt>
									<span class="light fixedFont">{TypeError}</span>  <b></b>
								</dt>
								<dd>if <code>rule.route</code> or <code>rule.method</code> are not strings or empty strings</dd>
							
							</dl>
						
						
						
						

					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0 on Wed Apr 18 2012 13:03:13 GMT+0100 (BST)
		</div>
	</body>
</html>
